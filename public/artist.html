<!DOCTYPE html>
<html lang="es-Ar">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>YouMulti - Artista</title>
    <link rel="stylesheet" href="style/bootstrap.min.css" />
    <link rel="stylesheet" href="style/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="style/jquery-ui.min.css" />
    <link rel="stylesheet" href="style/custom.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
      integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script
        type="text/javascript"
        src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"
      ></script>
      <script
        type="text/javascript"
        src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"
      ></script>
    <![endif]-->
  </head>

  <body>
    <div id="navContainer"></div>

    <div class="container tc">
      <h1 title="Buscador de artistas">Artistas</h1>
      <div id="return">
        <a class="btn btn-primary" id="return-icon" title="Volver">Volver</a>
      </div>
      <div class="row">
        <div class="col-md-4" style="display: none">
          <input
            id="artist"
            title="Artista"
            class="form-control autocomplete"
            placeholder="Artistas..."
          />
          <button
            type="submit"
            id="searchArtist"
            class="btn btn-primary"
            title="Detalle"
          >
            Buscar <span class="glyphicon glyphicon-search"></span>
          </button>
          <button
            type="submit"
            id="clearMultimedia"
            class="btn btn-primary"
            title="Limpiar"
          >
            Limpiar <span class="fas fa-eraser"></span>
          </button>
        </div>
        <div class="col-md-12" id="artistNotFound" style="display: none">
          <div class="wrapper">
            <div id="ArtistInfo">
              <h1>Artista no encontrado</h1>
            </div>
          </div>
        </div>
        <div class="col-md-12" id="artistDetail" style="display: none">
          <div class="wrapper">
            <div id="ArtistInfo">
              <table class="table" title="Información de artista">
                <tbody>
                  <tr>
                    <th>Id</th>
                    <td id="idArtist"></td>
                  </tr>
                  <tr>
                    <th>Nombre</th>
                    <td id="nameArtist"></td>
                  </tr>
                  <tr>
                    <th>Residencia</th>
                    <td id="countryArtist"></td>
                  </tr>
                  <tr>
                    <th>Fecha nacimiento</th>
                    <td id="birthArtist"></td>
                  </tr>
                  <tr id="optWins">
                    <th>Premios</th>
                    <td id="trophy">
                      <button
                        type="submit"
                        id="trophy"
                        class="btn btn-primary"
                        data-toggle="modal"
                        data-target="#detailModal"
                        title="Premios"
                      >
                        Premios <i class="fas fa-trophy"></i>
                      </button>
                    </td>
                  </tr>
                  <tr id="optSocial">
                    <th>Social</th>
                    <td id="social">
                      <button
                        id="socialB"
                        class="btn btn-primary"
                        title="Redes sociales"
                      >
                        Redes sociales <i class="fas fa-share-alt"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container tc" id="moreInfo" style="display: none">
      <div class="row">
        <div class="col-md-6" id="multimedia" style="cursor: pointer">
          <h1 title="Multimedia por artista">Ver Multimedia</h1>
        </div>
        <div class="col-md-6" id="photos" style="cursor: pointer">
          <h1 title="Fotos por artista">Ver Fotos</h1>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="detailModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Premios</h5>
          </div>
          <div class="modal-body">
            <table
              class="table table-bordered table-striped"
              title="Premios por actor"
            >
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Fecha</th>
                </tr>
              </thead>
              <tbody id="bodyTable"></tbody>
            </table>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Cerrar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /.container -->

    <script type="text/javascript " src="js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript " src="js/jquery-ui.min.js "></script>
    <script type="text/javascript " src="js/bootstrap.min.js "></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"
      integrity="sha512-ZuOjyqq409+q6uc49UiBF3fTeyRyP8Qs0Jf/7FxH5LfhqBMzrR5cwbpDA4BgzSo884w6q/+oNdIeHenOqhISGw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script type="text/javascript " src="js/db.js "></script>
    <script type="text/javascript " src="js/artist/utils.js "></script>
  </body>
</html>

<script type="text/javascript ">
  let url = "./includes/nav.html"
  $.ajax({
      crossOrigin: true,
      url: url,
      success: function (data) {
          $("#navContainer").html(data);
      }
  });
  //Variables
  let query = window.location.search.substring(1),
      photos = multimedia.photos,
      director = artist.directors,
      winsTrophies = rewards.trophies,
      actors = artist.actors,
      musician = artist.musician,
      musicalGroups = artist.musicalGroups,
      availableArtist = artist.actors;

  $(document).ready(function () {
    var qs = funcs.parse_query_string(query);

    $("#photos").click(function(){funcs.redir("pictures",qs)});

    $("#multimedia").click(function(){funcs.redir("multimediaArtist",qs)});

    $("#socialB").click(function(){funcs.redir("social",qs)});

    $("#trophy").click(function () {
        funcs.appendTrophies(actors, musician, musicalGroups)
    });

    $("#searchArtist").click(function () {
        funcs.searchArt(actors, musician, musicalGroups)
    });

    $("#clearMultimedia").click(function () {
        funcs.clearForm();
    });

      $("#return").css('visibility', 'hidden');

      if (qs != null) {
          $("#return").css('visibility', 'visible');
        if (qs.multimedia) {
            let prevFrom = "";
            if(!_.isUndefined(qs.prevFrom) && !_.isEmpty(qs.prevFrom)){
                prevFrom ="&from="+qs.prevFrom;
            }
            $("#return-icon").text("Volver a Peliculas/Serie");
            $("#return-icon").append($("<span />").addClass("fas fa-undo"));
            $("#return-icon").attr("href", "./multimedia.html?multimedia=" + qs.multimedia + prevFrom);
        }
        if (qs.music) {
            let prevFrom = "";
            if(!_.isUndefined(qs.prevFrom) && !_.isEmpty(qs.prevFrom)){
                prevFrom ="&from="+qs.prevFrom;
            }
            $("#return-icon").text("Volver a Música");
            $("#return-icon").append($("<span />").addClass("fas fa-undo"));
            $("#return-icon").attr("href", "./music.html?music=" + qs.music + prevFrom);
        }

        if(!_.isUndefined(qs.from)){
            let goTo = "";
            switch (qs.from) {
                case "index":
                    goTo="Volver a Home";
                    break;
                default:
                    goTo="Volver a Buscador";
                    break;
            }
            $("#return-icon").text(goTo);
            $("#return-icon").attr("href", "./"+qs.from+".html");
        }
        if (!_.isUndefined(qs.artist)) {
            $("#artist").val(qs.artist);
            funcs.searchArt(actors, musician, musicalGroups);
        }
      }
  });
</script>
